<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>YT Summarizer IA</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="container">
    <h1>ğŸ¬ YouTube Summary Generator</h1>
    <form method="POST" action="/summarize" class="summary-form">
      <fieldset>
        <legend>Enter Video Link</legend>
        <input type="text" name="youtube_url" id="youtube_url" placeholder="https://youtube.com/..." required>
      </fieldset>

      <fieldset>
        <legend>Choose AI Engine</legend>
        <label><input type="radio" name="engine" id="ollama" value="ollama" checked> ğŸ–¥ï¸ Ollama (local)</label>
        <label><input type="radio" name="engine" id="openai-user" value="openai-user"> ğŸŒ Your OpenAI API</label>
        <div id="openai-config" style="display: none;">
          <input type="text" id="api_url" name="api_url" placeholder="API URL">
          <input type="password" id="api_key" name="api_key" placeholder="API Key">
        </div>
        <label>
        <input type="radio" name="engine" id="openai-default" value="openai-default">
        ğŸŒ OpenAI API â€“ Default
        </label>
        <!-- Champ cachÃ© pour maintenir la compatibilitÃ© avec le backend -->
        <input type="hidden" name="ia_source" id="ia_source_hidden">
      </fieldset>

      <fieldset>
        <legend>Summary Settings</legend>
        <label for="language">Language</label>
        <input list="languages" name="language" id="language" required placeholder="e.g. en, fr, es">
        <datalist id="languages">
          <option value="en"><option value="fr"><option value="es"><option value="de">
          <option value="it"><option value="pt"><option value="ar"><option value="zh">
        </datalist>

        <label for="detail_level">Detail Level</label>
        <select name="detail_level" id="detail_level">
          <option value="short">Short</option>
          <option value="medium" selected>Medium</option>
          <option value="detailed">Detailed</option>
        </select>

        <label for="summary_type">Summary Type</label>
        <select name="summary_type" id="summary_type">
          <option value="full" selected>ğŸ“š Full Summary</option>
          <option value="tools">ğŸ“„ Tools & Methods</option>
          <option value="insights">ğŸ’¡ Key Learnings</option>
        </select>
      </fieldset>

      <fieldset>
        <legend>ğŸ¨ Customize your summary</legend>

        <details>
          <summary style="cursor: pointer; font-weight: bold; margin-bottom: 10px;">
            Advanced options (click to customize)
          </summary>

          <div style="margin-top: 15px;">

            <label for="style_choice">Summary style:</label>
            <select id="style_choice" name="style_choice">
              <option value="mixed" selected>Mixed text & bullet points</option>
              <option value="bullet_points">Bullet points only - no text</option>
              <option value="text_only">Text only - no bullet points</option>
            </select>

            <br>
            <div style="margin-bottom: 10px;">
              <span>Emojis:</span>
              <div style="display: flex; gap: 20px; margin-top: 5px;">
                <label>
                  <input type="radio" name="add_emojis" value="yes" checked>
                  Add emojis
                </label>
                <label>
                  <input type="radio" name="add_emojis" value="no">
                  Do not add emojis
                </label>
              </div>
            </div>
            
            <div style="margin-bottom: 10px;">
              <span>Tables:</span>
              <div style="display: flex; gap: 20px; margin-top: 5px;">
                <label>
                  <input type="radio" name="add_tables" value="yes" checked>
                  Add tables
                </label>
                <label>
                  <input type="radio" name="add_tables" value="no">
                  Do not add tables
                </label>
              </div>
            </div>
            <br>

            <label for="custom_instructions">Specific instructions (optional):</label><br>
            <textarea id="custom_instructions" name="custom_instructions" rows="4" placeholder="Ex: Focus only on tools mentioned..."></textarea>

          </div>
        </details>

      </fieldset>

      <button type="submit" class="btn-submit">â–¶ï¸ Generate Summary</button>
    </form>

    <div id="summary-container" style="display: none;">
      <h2>Summary</h2>
      <div id="loading-animation" style="display: none; align-items: center; gap: 10px;">
          <span style="font-weight: bold;">â³ Generating summary <span id="loading-dots">.</span></span>
      </div>
      <div id="summary-result" style="white-space: pre-wrap;"></div>
      <div id="token-info" class="token-info"></div>
      <div id="error-message" class="error-message"></div>

      <div id="summary-actions" style="margin-top: 10px; display: none; text-align: center;">
        <button onclick="downloadSummary()">ğŸ“¥ Download</button>
        <button onclick="copySummary()">ğŸ“‹ Copy</button>
        <span id="copy-feedback" class="copy-feedback"></span>
      </div>
    </div>
  </div>
  <br><br><br><br>
  <section class="faq">
    <h2>FAQ â€” Questions frÃ©quentes</h2>

    <div class="faq-item">
        <h3>â³ Pourquoi le rÃ©sumÃ© peut-il prendre du temps ?</h3>
        <p>
        Le temps de gÃ©nÃ©ration dÃ©pend surtout :<br>
        - de la longueur de la vidÃ©o<br>
        - du moteur IA que tu choisis<br>
        Les moteurs en local (Ollama) sont souvent plus lents car ton ordinateur fait tout le calcul. Les moteurs OpenAI (API) sont gÃ©nÃ©ralement plus rapides.
        </p>
    </div>

    <div class="faq-item">
        <h3>ğŸ¤– Quelle est la diffÃ©rence entre Ollama, ton OpenAI API et l'OpenAI du site ?</h3>
        <p>
        - <strong>Ollama (local)</strong> â†’ IA installÃ©e sur ton ordinateur. Gratuit, mais lent et dÃ©pendant de ta machine.<br>
        - <strong>Ton OpenAI API</strong> â†’ Tu payes OpenAI directement et utilises ta clÃ© perso.<br>
        - <strong>OpenAI du site</strong> â†’ Câ€™est notre clÃ© OpenAI. Gratuite (pour lâ€™instant).
        </p>
    </div>

    <div class="faq-item">
        <h3>ğŸ” Que veulent dire les niveaux de dÃ©tail ?</h3>
        <p>
        - <strong>Short</strong> â†’ RÃ©sumÃ© ultra-rapide, trÃ¨s synthÃ©tique<br>
        - <strong>Medium</strong> â†’ RÃ©sumÃ© Ã©quilibrÃ©<br>
        - <strong>Detailed</strong> â†’ RÃ©sumÃ© complet et prÃ©cis
        </p>
    </div>

    <div class="faq-item">
        <h3>ğŸ“š Quels types de rÃ©sumÃ© puis-je demander ?</h3>
        <p>
        - <strong>RÃ©sumÃ© complet</strong> â†’ L'ensemble des idÃ©es principales<br>
        - <strong>Outils & MÃ©thodes</strong> â†’ Liste des outils ou techniques Ã©voquÃ©s<br>
        - <strong>Key Learnings</strong> â†’ Les grandes idÃ©es, les conseils clÃ©s
        </p>
    </div>
</section>

  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
